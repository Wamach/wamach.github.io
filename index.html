<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.13/jspdf.plugin.autotable.min.js"></script>
  <title>Medicamentos - Horario</title>
</head>

<body>

  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <h2 class="text-center">Formulario de Medicamentos</h2>

        <form id="medicamentosForm">
          <div class="form-group">
            <label for="inicio">Fecha y hora de inicio del medicamento (YYYY-MM-DD HH:MM):</label>
            <input type="datetime-local" id="inicio" name="inicio" class="form-control">
          </div>
          <div class="form-group">
            <label for="nombre">Nombre del medicamento:</label>
            <input type="text" id="nombre" name="nombre" class="form-control">
          </div>
          <div class="form-group">
            <label for="frecuencia">Frecuencia de consumo en horas:</label>
            <input type="number" id="frecuencia" name="frecuencia" class="form-control">
          </div>
          <div class="form-group">
            <label for="duracion">Duración del tratamiento en días:</label>
            <input type="number" id="duracion" name="duracion" class="form-control">
          </div>
          <input type="submit" value="Enviar" class="btn btn-primary">
        </form>
      </div>
    </div>
  </div>

  <script>
    let medicamentos = [];

    document.getElementById('medicamentosForm').addEventListener('submit', function (e) {
      e.preventDefault();

      let inicioStr = document.getElementById('inicio').value;
      let nombreMedicamento = document.getElementById('nombre').value;
      let frecuenciaStr = document.getElementById('frecuencia').value;
      let duracionStr = document.getElementById('duracion').value;

      let inicioMedicamento = new Date(inicioStr);
      let frecuenciaConsumoHoras = parseInt(frecuenciaStr);
      let duracionDias = parseInt(duracionStr);

      medicamentos.push({
        inicioMedicamento,
        nombreMedicamento,
        frecuenciaConsumoHoras,
        duracionDias
      });

      var doc = new jsPDF();
      doc.autoTable({
        head: [['Inicio', 'Nombre', 'Frecuencia (horas)', 'Duración (días)']],
        body: medicamentos.map(med => [
          med.inicioMedicamento,
          med.nombreMedicamento,
          med.frecuenciaConsumoHoras,
          med.duracionDias
        ])
      });
      doc.save('medicamentos.pdf');
    });
  </script>
  
  </body>
  </html>

</html>